{% extends "base.html" %}
<style>
{% block style %}
.carousel {
    margin-top: 20px;
}
.item .thumb {
	width: 25%;
	cursor: pointer;
	float: left;
}
.item .thumb img {
	width: 100%;
	margin: 2px;
}
.item img {
	width: 100%;	
}

.pro-color{
	float: left;
    width: 20px;
    height: 20px;
    margin: 5px;
    border-width: 1px;
    border-style: solid;
    border-color: rgba(0,0,0,.2);
}

{% endblock style %}
</style>

<script>
{% block jquery %}
function setPrice(){
	var price = $(".variation_select option:selected").attr("data-price");

	var sale_price = $(".variation_select option:selected").attr("data-sale-price");
	if(sale_price != "" && sale_price != "None" && sale_price != null){
		$("#price").html('<h3>Rs.' + sale_price + ' <small class="og-price">Rs.' + price + '</small></h3>');
	}else{
		$("#price").html('Rs. ' + price);
	}
}

setPrice();

$(".variation_select").change(function(){
	setPrice();
});

{% endblock jquery %}
</script>


{% block content %}

<div class="row">

	<div class="col-sm-5">
		{% if object.productimage_set.count <= 1 %}
		{% if object.get_image_url %}
		<img src="{{ object.get_image_url }}" class="img-responsive"/>
		{% endif %}
		{% else %}
		<div id="carousel" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
            	{% for img in object.productimage_set.all %}
            	{% if object.productimage_set.first.id == img.id %}
                <div class="item active">
                    <img src="{{ img.image.url }}" class="img-responsive" alt="product image">
                </div>
                {% else %}
                <div class="item">
                    <img src="{{ img.image.url }}" class="img-responsive" alt="product image">
                </div>
                {% endif %}

                {% endfor %}
            </div>
        </div> 

		<div class="clearfix">
        <div id="thumbcarousel" class="carousel slide" data-interval="false">
            <div class="carousel-inner">
                <div class="item active">
                {% for img in object.productimage_set.all %}
                    <div data-target="#carousel" data-slide-to="{{ forloop.counter0 }}" class="thumb"><img src="{{ img.image.url }}" alt="image thubnail"></div>
                {% endfor %}
                </div><!-- /item -->
            </div><!-- /carousel-inner -->
            <a class="left carousel-control" href="#thumbcarousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left"></span>
            </a>
            <a class="right carousel-control" href="#thumbcarousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </div> <!-- /thumbcarousel -->
    </div><!-- /clearfix -->
    {% endif %}
	</div>

	<div class="col-sm-4">
		<h2>{{ object.title }}</h2>

		<p class="lead">
			<h4>Short Description</h4>
			{{ object.short_description|safe }}
		</p>
	</div>

	<!-- Product Sidebar -->
	<div class="col-sm-3">

		{% if object.variation_set.count > 1 %}
		<h4 id="price">Rs. {{ object.variation_set.first.price }}</h4>
		<h4>Select Size:</h4>
		<select class="form-control variation_select">
		{% for vari_obj in object.variation_set.all %}
		<option data-sale-price="{{ vari_obj.sale_price }}" data-price="{{ vari_obj.price }}" value="{{ vari_obj.id }}">{{ vari_obj }}</option>
		{% endfor %}
		</select>
		{% elif object.shoessizes.count > 0 %}
		<h4>Select Size:</h4>
		<select class="form-control">
			{% for shoessize in object.shoessizes.all %}
				<option value="{{ shoessize.id }}">{{ shoessize.title }}</option>
			{% endfor %}
		</select>

		{% elif object.shirtsizes.count > 0 %}
		<h4>Select Size:</h4>
		<select class="form-control">
			{% for shirtsize in object.shirtsizes.all %}
				<option value="{{ shirtsize.id }}">{{ shirtsize.title }}</option>
			{% endfor %}
		</select>
		{% else %}
		<h4 id="price">Rs. {% if object.variation_set.first.sale_price %}
			Rs. {{ object.variation_set.first.sale_price }}
			<small class='og-price'>Rs. {{ object.variation_set.first.price }}</small>
			{% else %}
			Rs. {{ object.variation_set.first.price }}
			{% endif %}
		</h4>
		{% endif %}
		{% if object.color.count > 0 %}
		<h4>Select Color:</h4>
		<p class="lead">
		{% for color in object.color.all %}
			<span class="pro-color" style="background-color:{{ color.title }};"></span>
		{% endfor %}
		</p>
		{% endif %}
		
		<br/>
		<br/>

		<a href="#">Add to Cart</a>
		
		<br/>
		<hr/>
	<h4>Share</h4><br/>
		<p>
		<a href="https://www.facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}">
	<i class="fa fa-facebook-square fa-3x"></i>
		</a>
		<a href="https://twitter.com/home?status={{ request.build_absolute_uri }}">
	<i class="fa fa-twitter-square fa-3x"></i>
		</a>
		<a href='https://plus.google.com/share?url={{ request.build_absolute_uri }}'>
	<i class="fa fa-google-plus-square fa-3x"></i>
		</a>
		</p>
		<br/>
		<hr/>
	</div>
	<!-- End Product Sidebar -->
</div>

<div class="row">
	<hr/>
	<div class="col-sm-8">
		<p class="lead">
			<h3>Long Description</h3>
			{{ object.long_description|safe }}
		</p>
	</div>
	<div class="col-sm-4">
		<h4>Related Products</h4>
		<div class="row">
		{% for product in related %}
		<div class="col-xs-6">
			{% include "products/product_thumbnail.html" with product=product price="True" %}
		</div>
		{% cycle '' '</div><div class="row">' %} 
		{% endfor %}
	</div>
</div>
{% endblock content %}