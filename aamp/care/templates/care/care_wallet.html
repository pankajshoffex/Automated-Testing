{% extends "care_base.html" %}
{% load staticfiles %}

{% block css %}
<link href="{% static 'css/datepicker.css' %}" rel="stylesheet">
<style type="text/css">
#datepicker{width:180px; margin: 0 20px 20px 20px;}
#datepicker > span:hover{cursor: pointer;}
</style>
{% endblock css %}

{% block script %}
 <script src="{% static 'js/bootstrap-datepicker.js' %}"></script>
 <script>
 	$(function () {
	  $("#datepicker_from").datepicker({ 
	        autoclose: true, 
	        todayHighlight: true,
	        startDate: '-2m',
    		endDate: 'd'
	  });//.datepicker('update', new Date());
	});
	$(function () {
	  $("#datepicker_to").datepicker({ 
	        autoclose: true, 
	        todayHighlight: true,
	        startDate: '2016-01-01',
    		endDate: 'd'
	  });//.datepicker('update', new Date());
	});
 </script>
{% endblock script %}

{% block content %}
<h3>My Wallet</h3>
<hr/>
<div class="row">
	<div class="col-sm-6">
		<div class="panel panel-primary">
			<div class="panel-heading">Monthly Earning</div>
			<div class="panel-body">
				<table class="table table-responsive">
				<tr>
				<td>Earning Rs:<b> {{ monthly_commission }}</b></td>
				<td>Orders:<b> {{ monthly_order_count }}</b></td>
				</tr>
				</table>
			</div>
		</div>
	</div>
	<div class="col-sm-6">	
		<div class="panel panel-primary">
		  <div class="panel-heading">Total Earning</div>
		  <div class="panel-body">
		    <table class="table table-responsive">
					<tr>
						<td>Earning Rs:<b> {{ total_commission }}</b></td>
						<td>Orders:<b> {{ order_count }}</b></td>
					</tr>
				</table>
		  </div>
		</div>
	</div>
</div>
<h3>Monthly Commission Details</h3>
<hr/>
<div class="row">
	<div class="col-sm-6 col-sm-offset-3">
	<form class="navbar-form navbar-left" role="form">
		<div class="form-group">
		<label for="datepicker_from">From:</label>
		<div id="datepicker_from" class="input-group date" data-date-format="yyyy-mm-dd">
		    <input class="input-group-addon" id="from" name="from" style="width:100px;" type="text" placeholder="YYYY-MM-DD" value="{{ request.GET.from }}" readonly />
		</div>
		</div>
		<div class="form-group">
		<label for="datepicker_to">To:</label>
		<div id="datepicker_to" class="input-group date" data-date-format="yyyy-mm-dd">
		    <input class="input-group-addon" id="to" name="to" placeholder="YYYY-MM-DD" style="width:100px;" type="text" value="{{ request.GET.to }}" readonly />
		</div>
		</div>
		<button type="submit" class="btn btn-default">Submit</button>
	  </form> 
		<table class="table table-responsive text-center">
			<tr>
				<td><b>Order ID</b></td>
				<td><b>Commission(Rs)</b></td>
			</tr>
			{% for order in monthly_orders %}
			<tr>
				<td>{{ order.order_id }}</td>
				<td>{{ order.get_commission }}</td>
			</tr>
			{% endfor %}
			<tr>
				<td><b>Total Commission</b></td>
				<td>{{ m_total_commission }}</td>
			</tr>
		</table>
	</div>
</div>

{% endblock content %}